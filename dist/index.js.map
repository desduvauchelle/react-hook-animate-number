{"version":3,"file":"index.js","sources":["../src/easingFunctions.ts","../src/useAnimateNumber.tsx","../src/index.ts"],"sourcesContent":["// https://easings.net/#\n\n// x is a value for progress of the animation between 0 and 1\n\nconst easing = {\n\teaseInOutCubic: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2\n\t},\n\teaseOutCirc: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn Math.sqrt(1 - Math.pow(x - 1, 2))\n\t},\n\teaseOutQuint: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn 1 - Math.pow(1 - x, 5)\n\t},\n\teaseOutExpo: (x: number): number => {\n\t\treturn x === 1 ? 1 : 1 - Math.pow(2, -10 * x)\n\t}\n}\n\nexport default easing","import { useState, useEffect } from 'react'\nimport easing from './easingFunctions'\nconst FPS = 60\n\n\n\ntype FuncType = (props: {\n\tnumber: number,\n\tdurationInMs?: number,\n\tdecimalPlaces?: number\n}) => number\n\nconst useAnimateNumber: FuncType =\n\t({\n\t\tnumber = 0,\n\t\tdurationInMs = 4000,\n\t\tdecimalPlaces = 0\n\t}) => {\n\t\tconst [currentNumber, setCurrentNumber] = useState(0)\n\t\tconst [originalNumber, setOriginalNumber] = useState(0)\n\t\tconst [currentTarget, setCurrentTarget] = useState(0)\n\t\tconst [step, setStep] = useState(0)\n\n\n\t\tuseEffect(() => {\n\t\t\tif (number === originalNumber) return\n\n\t\t\t// Check if it's already in the middle of an animation\n\t\t\tif (step > 0 && currentTarget !== number) {\n\t\t\t\tsetOriginalNumber(currentNumber)\n\t\t\t\tsetStep(0)\n\t\t\t}\n\n\t\t\tlet isGoingUp = number > originalNumber\n\n\t\t\tconst numberOfSteps = Math.round(1000 / FPS * durationInMs / 1000)\n\n\t\t\tconst progress = (step + 1) / numberOfSteps\n\t\t\tconst percentageOfTargetValue = easing.easeOutExpo(progress)\n\t\t\tlet currentValue = percentageOfTargetValue * number\n\t\t\tif (!isGoingUp) {\n\t\t\t\tcurrentValue = (1 - percentageOfTargetValue) * originalNumber + number\n\t\t\t}\n\t\t\tif (decimalPlaces === 0) {\n\t\t\t\tcurrentValue = Math.round(currentValue)\n\t\t\t}\n\t\t\tif (isGoingUp && currentValue > number) {\n\t\t\t\tcurrentValue = number\n\t\t\t}\n\t\t\tif (!isGoingUp && currentValue < number) {\n\t\t\t\tcurrentValue = number\n\t\t\t}\n\t\t\t// console.log(`From ${originalNumber} to ${currentTarget}. Currently: ${currentValue} ${isGoingUp? `UP⬆️`: `DOWN⬇️`}`)\n\n\t\t\tif (step === numberOfSteps || currentValue === number) {\n\n\t\t\t\tsetOriginalNumber(number)\n\t\t\t\tsetCurrentNumber(number)\n\t\t\t\tsetStep(0)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetCurrentTarget(number)\n\t\t\t\tsetStep(step + 1)\n\t\t\t\tsetCurrentNumber(currentValue)\n\t\t\t}, 1000 / FPS)\n\n\t\t}, [number, originalNumber, currentNumber, step])\n\n\t\treturn currentNumber\n\t}\n\nexport default useAnimateNumber","import useAnimateNumber from \"./useAnimateNumber\";\nimport easing from \"./easingFunctions\";\n\nexport default {\n\tuseAnimateNumber,\n\teasing\n}"],"names":["easing","easeInOutCubic","x","Math","pow","easeOutCirc","sqrt","easeOutQuint","easeOutExpo","FPS","useAnimateNumber","number","durationInMs","decimalPlaces","useState","currentNumber","setCurrentNumber","originalNumber","setOriginalNumber","currentTarget","setCurrentTarget","step","setStep","useEffect","isGoingUp","numberOfSteps","round","progress","percentageOfTargetValue","currentValue","setTimeout"],"mappings":"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"}