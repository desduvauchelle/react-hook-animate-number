{"version":3,"file":"index.modern.js","sources":["../src/easingFunctions.ts","../src/useAnimateNumber.tsx","../src/index.ts"],"sourcesContent":["// https://easings.net/#\n\n// x is a value for progress of the animation between 0 and 1\n\nconst easing = {\n\teaseInOutCubic: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2\n\t},\n\teaseOutCirc: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn Math.sqrt(1 - Math.pow(x - 1, 2))\n\t},\n\teaseOutQuint: (x: number): number => {\n\t\tif (x >= 1) return 1\n\t\treturn 1 - Math.pow(1 - x, 5)\n\t},\n\teaseOutExpo: (x: number): number => {\n\t\treturn x === 1 ? 1 : 1 - Math.pow(2, -10 * x)\n\t}\n}\n\nexport default easing","import { useState, useEffect } from 'react'\nimport easing from './easingFunctions'\nconst FPS = 60\n\n\n\ntype FuncType = (props: {\n\tnumber: number,\n\tdurationInMs?: number,\n\tdecimalPlaces?: number\n}) => number\n\nconst useAnimateNumber: FuncType =\n\t({\n\t\tnumber = 0,\n\t\tdurationInMs = 4000,\n\t\tdecimalPlaces = 0\n\t}) => {\n\t\tconst [currentNumber, setCurrentNumber] = useState(0)\n\t\tconst [originalNumber, setOriginalNumber] = useState(0)\n\t\tconst [currentTarget, setCurrentTarget] = useState(0)\n\t\tconst [step, setStep] = useState(0)\n\n\n\t\tuseEffect(() => {\n\t\t\tif (number === originalNumber) return\n\n\t\t\t// Check if it's already in the middle of an animation\n\t\t\tif (step > 0 && currentTarget !== number) {\n\t\t\t\tsetOriginalNumber(currentNumber)\n\t\t\t\tsetStep(0)\n\t\t\t}\n\n\t\t\tlet isGoingUp = number > originalNumber\n\n\t\t\tconst numberOfSteps = Math.round(1000 / FPS * durationInMs / 1000)\n\n\t\t\tconst progress = (step + 1) / numberOfSteps\n\t\t\tconst percentageOfTargetValue = easing.easeOutExpo(progress)\n\t\t\tlet currentValue = percentageOfTargetValue * number\n\t\t\tif (!isGoingUp) {\n\t\t\t\tcurrentValue = (1 - percentageOfTargetValue) * originalNumber + number\n\t\t\t}\n\t\t\tif (decimalPlaces === 0) {\n\t\t\t\tcurrentValue = Math.round(currentValue)\n\t\t\t}\n\t\t\tif (isGoingUp && currentValue > number) {\n\t\t\t\tcurrentValue = number\n\t\t\t}\n\t\t\tif (!isGoingUp && currentValue < number) {\n\t\t\t\tcurrentValue = number\n\t\t\t}\n\t\t\t// console.log(`From ${originalNumber} to ${currentTarget}. Currently: ${currentValue} ${isGoingUp? `UP⬆️`: `DOWN⬇️`}`)\n\n\t\t\tif (step === numberOfSteps || currentValue === number) {\n\n\t\t\t\tsetOriginalNumber(number)\n\t\t\t\tsetCurrentNumber(number)\n\t\t\t\tsetStep(0)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetCurrentTarget(number)\n\t\t\t\tsetStep(step + 1)\n\t\t\t\tsetCurrentNumber(currentValue)\n\t\t\t}, 1000 / FPS)\n\n\t\t}, [number, originalNumber, currentNumber, step])\n\n\t\treturn currentNumber\n\t}\n\nexport default useAnimateNumber","import useAnimateNumber from \"./useAnimateNumber\";\nimport easing from \"./easingFunctions\";\n\nexport default {\n\tuseAnimateNumber,\n\teasing\n}"],"names":["easing","easeInOutCubic","x","Math","pow","easeOutCirc","sqrt","easeOutQuint","easeOutExpo","FPS","useAnimateNumber","number","durationInMs","decimalPlaces","currentNumber","setCurrentNumber","useState","originalNumber","setOriginalNumber","currentTarget","setCurrentTarget","step","setStep","useEffect","isGoingUp","numberOfSteps","round","progress","percentageOfTargetValue","currentValue","setTimeout"],"mappings":"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"}